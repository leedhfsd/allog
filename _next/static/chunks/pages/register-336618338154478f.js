(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{4722:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return s(204)}])},204:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(5893),l=s(9008),n=s.n(l),i=s(1163),r=s(7294),c=s(602),o=s(2474);function u(){let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[x,p]=(0,r.useState)(!1),[f,w]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[b,g]=(0,r.useState)(!1),[N,v]=(0,r.useState)(!1),[S,k]=(0,r.useState)(!0),C=(0,r.useRef)(null),_=(0,i.useRouter)(),E=async()=>{await _.push("/auth/welcome")},T=e=>{let s=e.target;t(s.value)},A=e=>{let t=e.target;d(t.value)},O=e=>{let t=e.target;l(t.value)},F=e=>{let t=e.target;h(t.value)},z=()=>{k(!0)},D=t=>{if(t.preventDefault(),!N){alert("이메일이 인증되지 않았습니다.");return}let a=async()=>{let t={name:e.split("@")[0],email:e,password:s,userinfo:"",nickname:u,image:"https://www.shareicon.net/data/128x128/2015/10/04/112008_people_512x512.png",emailVerified:N};await fetch("/api/auth/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})};a().then(()=>E()).catch(e=>{throw e})},R=e=>{let t=e.target;y(t.value)},I=async()=>{if(/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(e)){let t=e.split("@")[0],s=await fetch("/api/auth/user?name=".concat(t)),a=await s.json();if(a.name)alert("해당하는 이메일의 ID가 이미 사용중입니다.");else{g(!0);let l=await fetch("/api/auth/mail?email=".concat(e));await l.json().then(e=>{w(e.authCode),(0,c.setTimeout)(()=>{g(!1)},18e4)})}}else alert("올바른 이메일 주소를 적어주세요")},L=()=>{!function(e,t,s){let a=(0,o.pbkdf2Sync)(e,s,101243,64,"sha512"),l=a.toString("base64");return t===l}(j,f,"THISISNEXTAUTHSECRETFORJWTDECODE")?alert("인증번호가 일치하지 않습니다."):v(!0)},P=e=>{var t;let s=e.target;!S||(null===(t=C.current)||void 0===t?void 0:t.contains(s))||k(!1)};return(0,r.useEffect)(()=>(S&&document.addEventListener("mousedown",P),()=>{document.removeEventListener("mousedown",P)})),(0,r.useEffect)(()=>{S||p(function(e){let t=e.search(/[0-9]/g),s=e.search(/[a-zA-Z]/g),a=e.search(/[a-zA-Z0-9{}[\]\\/?.,;:|)*~`!^\-_+<>@#$%&\\=('"]/g),l=e.search(/\s/);return!(e.length<8)&&!(e.length>16)&&!/[^a-zA-Z0-9{}[\]\\/?.,;:|)*~`!^\-_+<>@#$%&\\=('"]/.test(e)&&-1===l&&-1!==t&&-1!==s&&-1!==a}(s))},[S,s]),(0,a.jsxs)("div",{children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"회원가입 | Allog"}),(0,a.jsx)("meta",{name:"description",content:"Allog의 서비스를 이용하기 위한 회원가입을 위한 페이지입니다."}),(0,a.jsx)("meta",{name:"keywords",content:"BLOG, 블로그, Allog, 회원가입"})]}),(0,a.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,a.jsxs)("div",{className:"w-[300px] sm:w-[400px] h-[768px] my-10",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-center my-16",children:"Allog 회원가입"}),(0,a.jsxs)("form",{onSubmit:D,className:"flex flex-col text-sm",children:[(0,a.jsx)("label",{htmlFor:"email",children:"이메일"}),(0,a.jsx)("input",{className:"outline-blue-500 py-3 mt-1 mb-4",id:"email",type:"email",placeholder:"이메일을 입력해 주세요",onChange:T}),(0,a.jsx)("label",{htmlFor:"nickname",children:"별명"}),(0,a.jsx)("input",{className:"outline-blue-500 py-3 mt-1 mb-4",id:"nickname",type:"text",placeholder:"별명을 입력해주세요",onChange:A}),(0,a.jsx)("label",{htmlFor:"password",children:"비밀번호"}),x?(0,a.jsx)("input",{className:"outline-blue-500 py-3 mt-1 mb-4",type:"password",id:"password",placeholder:"비밀번호를 입력해 주세요",ref:C,onClick:z,onChange:O}):(0,a.jsx)("input",{className:"outline-red-500 py-3 mt-1",type:"password",id:"password",placeholder:"비밀번호를 입력해 주세요",ref:C,onClick:z,onChange:O}),!x&&(0,a.jsx)("div",{className:"text-xs text-red-500 my-1",children:"공백없이 8~16자 영문 대소문자, 숫자, 특수문자를 사용해주세요."}),(0,a.jsx)("label",{htmlFor:"re-password",children:"비밀번호 재확인"}),(0,a.jsx)("input",{className:"outline-blue-500 py-3 mt-1",type:"password",id:"re-password",placeholder:"동일한 비밀번호를 입력해주세요",onChange:F}),m&&(s===m?(0,a.jsx)("div",{className:"text-sky-500 text-xs mt-1",children:"동일한 비밀번호입니다."}):(0,a.jsx)("div",{className:"text-red-500 text-xs mt-1",children:"동일하지 않은 비밀번호입니다."})),(0,a.jsx)("label",{htmlFor:"verification",className:"flex flex-col mt-4",children:"인증번호"}),(0,a.jsx)("div",{className:"",children:N?(0,a.jsx)("div",{className:"text-sky-500 mt-2",children:"인증되었습니다."}):(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("input",{className:"outline-blue-500 py-3 my-2",type:"text",id:"verification",placeholder:"인증번호",onChange:R}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("button",{className:"text-sky-600 text-sm mx-2",type:"button",onClick:I,children:"인증발송"}),b&&(0,a.jsx)("button",{className:"text-sky-600 text-sm",type:"button",onClick:L,children:"인증확인"})]})]})}),(0,a.jsx)("button",{className:" bg-sky-600 py-2 text-white rounded-lg text-sm mt-8 mb-2",type:"submit",children:"가입하기"})]})]})})]})}}},function(e){e.O(0,[714,799,774,888,179],function(){return e(e.s=4722)}),_N_E=e.O()}]);